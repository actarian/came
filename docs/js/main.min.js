!function(){return function t(e,n,o){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){return i(e[s][1][t]||t)},c,c.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}}()({1:[function(t,e,n){var o,i;o=this,i=function(t){"use strict";var e={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(e.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};function i(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function s(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(n[Symbol.iterator]=function(){return n}),n}function a(t){this.map={},t instanceof a?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function l(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function c(t){var e=new FileReader,n=l(e);return e.readAsArrayBuffer(t),n}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(t){var n;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:e.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:e.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():e.arrayBuffer&&e.blob&&((n=t)&&DataView.prototype.isPrototypeOf(n))?(this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):e.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||o(t))?this._bodyArrayBuffer=f(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?u(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(c)}),this.text=function(){var t,e,n,o=u(this);if(o)return o;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=l(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),o=0;o<e.length;o++)n[o]=String.fromCharCode(e[o]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}a.prototype.append=function(t,e){t=i(t),e=r(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},a.prototype.delete=function(t){delete this.map[i(t)]},a.prototype.get=function(t){return t=i(t),this.has(t)?this.map[t]:null},a.prototype.has=function(t){return this.map.hasOwnProperty(i(t))},a.prototype.set=function(t,e){this.map[i(t)]=r(e)},a.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},a.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),s(t)},a.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),s(t)},a.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),s(t)},e.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function h(t,e){var n,o,i=(e=e||{}).body;if(t instanceof h){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new a(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new a(e.headers)),this.method=(n=e.method||this.method||"GET",o=n.toUpperCase(),p.indexOf(o)>-1?o:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function m(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),o=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(i))}}),e}function y(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new a(e.headers),this.url=e.url||"",this._initBody(t)}h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},d.call(h.prototype),d.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var v=[301,302,303,307,308];y.redirect=function(t,e){if(-1===v.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},t.DOMException=self.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function b(n,o){return new Promise(function(i,r){var s=new h(n,o);if(s.signal&&s.signal.aborted)return r(new t.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function l(){u.abort()}u.onload=function(){var t,e,n={status:u.status,statusText:u.statusText,headers:(t=u.getAllResponseHeaders()||"",e=new a,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),o=n.shift().trim();if(o){var i=n.join(":").trim();e.append(o,i)}}),e)};n.url="responseURL"in u?u.responseURL:n.headers.get("X-Request-URL");var o="response"in u?u.response:u.responseText;i(new y(o,n))},u.onerror=function(){r(new TypeError("Network request failed"))},u.ontimeout=function(){r(new TypeError("Network request failed"))},u.onabort=function(){r(new t.DOMException("Aborted","AbortError"))},u.open(s.method,s.url,!0),"include"===s.credentials?u.withCredentials=!0:"omit"===s.credentials&&(u.withCredentials=!1),"responseType"in u&&e.blob&&(u.responseType="blob"),s.headers.forEach(function(t,e){u.setRequestHeader(e,t)}),s.signal&&(s.signal.addEventListener("abort",l),u.onreadystatechange=function(){4===u.readyState&&s.signal.removeEventListener("abort",l)}),u.send(void 0===s._bodyInit?null:s._bodyInit)})}b.polyfill=!0,self.fetch||(self.fetch=b,self.Headers=a,self.Request=h,self.Response=y),t.Headers=a,t.Request=h,t.Response=y,t.fetch=b,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(o.WHATWGFetch={})},{}],2:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(o){if("object"===(void 0===e?"undefined":i(e))&&"object"===i(e.exports)){var r=o(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports"],o)}(function(t,e){var n,i,r;Object.defineProperty(e,"__esModule",{value:!0}),e.USE_CALCULATED_PRICE=!0,e.MAX_APARTMENTS=48,function(t){t[t.Select=1]="Select",t[t.Group=2]="Group",t[t.List=3]="List",t[t.Grid=4]="Grid"}(n=e.MtmControlType||(e.MtmControlType={})),function(t){t[t.String=0]="String",t[t.Numeric=1]="Numeric"}(i=e.MtmSortType||(e.MtmSortType={})),function(t){t.Code="code",t.SingleModuleFrame="singleModuleFrame",t.Finish="finish",t.ModuleSize="moduleSize",t.Mount="mount",t.System="system",t.AudioVideo="AV",t.Keypad="keypad",t.Proximity="proximity",t.InfoModule="infoModule",t.HearingModule="hearingModule",t.DigitalDisplay="digitalDisplay",t.AdditionalModules="additionalModules",t.Buttons="buttons",t.Divided="divided",t.Mounting="mounting",t.FlushRainshield="flushRainshield",t.Frame="frame",t.Module1="electronicsModule1",t.Front1="frontPiece1",t.Module2="electronicsModule2",t.Front2="frontPiece2",t.Module3="electronicsModule3",t.Front3="frontPiece3",t.Module4="electronicsModule4",t.Front4="frontPiece4",t.Identifier="ci",t.Description="description",t.Price="price",t.Digi="digi",t.ButtonType="buttonType",t.KnownTecnology="knownTecnology",t.ConstrainedDimension="constrainedDimension",t.ApartmentNumber="apartmentNumber",t.CallButtons="callButtons",t.Default="none"}(r=e.MtmControlEnum||(e.MtmControlEnum={}));var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,s,a;return e=t,a=[{key:"withLocale",value:function(e){return t.selectNone.name=e.selectNone||"Select",[{key:r.Code,name:"Code"},{key:r.Digi,name:"Digi",lazy:!0,nullable:!0},{key:r.ButtonType,name:"ButtonType",lazy:!0},{key:r.SingleModuleFrame,disabled:!0},{key:r.Finish,name:e.finishName,type:n.Group,defaultNames:["Aluminium","Alluminio"],lazy:!0},{key:r.ModuleSize,name:e.moduleSizeName,description:e.moduleSizeDescription,type:n.Group},{key:r.Mount,name:e.mountName,type:n.List,lazy:!0,dynamicPicture:!0},{key:r.System,name:e.systemName,description:e.systemDescription,type:n.Grid},{key:r.AudioVideo,name:e.audioVideoName,type:n.Group},{key:r.Keypad,name:e.keypadName,description:e.keypadDescription,type:n.List,lazy:!0,nullable:!0},{key:r.Proximity,name:e.proximityName,description:e.proximityDescription,type:n.Group,lazy:!0,nullable:!0},{key:r.InfoModule,name:e.infoModuleName,description:e.infoModuleDescription,type:n.Group,lazy:!0,nullable:!0},{key:r.HearingModule,name:e.hearingModuleName,description:e.hearingModuleDescription,type:n.Group,lazy:!0,nullable:!0},{key:r.DigitalDisplay,name:e.digitalDisplayName,description:e.digitalDisplayDescription,type:n.Group,lazy:!0,nullable:!0},{key:r.AdditionalModules,disabled:!0},{key:r.Buttons,name:e.apartmentNumberName,type:n.Select,sortType:i.Numeric,nullable:!0,lazy:!0,className:"control--list--sm"},{key:r.Divided,lazy:!0,nullable:!0},{key:r.Mounting,lazy:!0},{key:r.FlushRainshield,lazy:!0},{key:r.Frame,lazy:!0},{key:r.Module1},{key:r.Front1},{key:r.Module2},{key:r.Front2},{key:r.Module3},{key:r.Front3},{key:r.Module4},{key:r.Front4},{key:r.Identifier,disabled:!0},{key:r.Description,disabled:!0},{key:r.Price},{key:r.KnownTecnology,name:e.knownTecnologyName,type:n.Group,className:"control--group--sm",values:[{id:1,name:e.buttonNoName},{id:2,name:e.buttonYesName}]},{key:r.ConstrainedDimension,name:e.constrainedDimensionName,type:n.Group,className:"control--group--sm",values:[{id:1,name:e.buttonNoName},{id:2,name:e.buttonYesName}]},{key:r.ApartmentNumber,name:e.apartmentNumberName,type:n.Select,sortType:i.Numeric,nullable:!0,lazy:!0,className:"control--list--sm",values:new Array(27).fill(0).map(function(t,e){return 26===e?{id:48,name:"> 26",value:48}:{id:e+1,name:(e+1).toFixed(0),value:e+1}})},{key:r.CallButtons,name:e.callButtonsName,type:n.List,lazy:!0,className:"control--list--sm",values:[{id:1,name:e.buttonSingleName},{id:2,name:e.buttonDoubleName},{id:3,name:e.buttonDigitalName},{id:4,name:e.buttonDigitalDigi1Name},{id:5,name:e.buttonDigitalDigi2Name}]},{key:r.Default,name:"name",description:"description",type:n.Group}]}}],(s=null)&&o(e.prototype,s),a&&o(e,a),t}();s.selectNone={id:-1,name:"Select",value:-1},e.MtmControls=s})},{}],3:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(t){return t&&t.__esModule?t:{default:t}};!function(o){if("object"===(void 0===e?"undefined":i(e))&&"object"===i(e.exports)){var r=o(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports","../data.service","../utils/dom","./constants","./value"],o)}(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=t("../data.service"),i=r(t("../utils/dom")),s=t("./constants"),a=t("./value"),u=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=s.MtmControlType.Grid,this.key=s.MtmControlEnum.Default,this.name="",this.description="",this.originalName="",this.values=[],this.cache={},this.count=0,this.index=0,this.className="",this.nullable=!1,this.lazy=!1,this.sortType=s.MtmSortType.String,this.element=null,this.currentItem=null,this.didChange=null,this.dynamicPicture=!1,this.resolvePicture=function(t){return null},e=e,Object.assign(this,e),this.originalName=this.name,e.values&&(this.values=e.values.map(function(t){return new a.MtmValue(t)}),this.values.forEach(function(t){n.cache[t.name]=t,n.count++}))}var e,r,u;return e=t,(r=[{key:"getTemplate",value:function(){return'<div class="option option--'.concat(this.key,'">\n\t\t<div class="title">').concat(this.name,"</div>").concat(this.description?'<div class="subtitle">'.concat(this.description,"</div>"):"",'\n\t\t<div class="control ').concat(this.className,'"></div>\n\t</div>')}},{key:"getChildTemplate",value:function(t){return this.dynamicPicture?'<button type="button" class="btn btn--option '.concat(t.selected?"selected":""," ").concat(t.active?"active":"",'" data-id="').concat(t.id,'">\n\t\t\t<span class="label"><img class="picture" src="').concat(this.resolvePicture(t),'" /> ').concat(t.name,"</span>").concat(t.getPrice(),"\n\t\t</button>"):'<button type="button" class="btn btn--option '.concat(t.selected?"selected":""," ").concat(t.active?"active":"",'" data-id="').concat(t.id,'">\n\t\t\t<span class="label">').concat(t.name,"</span>").concat(t.getPrice(),"\n\t\t</button>")}},{key:"getFragment",value:function(){var t=i.default.fragmentFromHTML(this.getTemplate());return this.element=i.default.fragmentFirstElement(t),t}},{key:"render",value:function(){var t=this,e=this.getFragment(),n=e.querySelector(".control"),o=this.values.map(function(e){return i.default.fragmentFromHTML(t.getChildTemplate(e))});return o.map(function(t){return i.default.fragmentFirstElement(t)}).forEach(function(e){return e.addEventListener("click",function(n){return t.onClick(e)})}),o.forEach(function(t){return n.appendChild(t)}),e}},{key:"onClick",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var n;Array.prototype.slice.call(t.parentNode.childNodes).forEach(function(t){return t.classList.remove("selected")}),this.values.forEach(function(t){return t.selected=!1});var o=parseInt(t.getAttribute("data-id"));n=this.values.find(function(t){return t.id===o}),this.currentItem===n?(n&&(n.selected=!1),this.currentItem=null):(t.classList.add("selected"),n.selected=!0,this.currentItem=n),e||"function"!=typeof this.didChange||this.didChange(this.currentItem,this)}}},{key:"unselect",value:function(){Array.prototype.slice.call(this.element.querySelectorAll(".selected")).forEach(function(t){return t.classList.remove("selected")}),this.values.forEach(function(t){return t.selected=!1}),this.currentItem=null}},{key:"onSelect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.values.forEach(function(t){return t.selected=!1}),this.currentItem=t,t){if(t.selected=!0,this.element){var n=this.element.querySelector(".control").querySelector('[data-id="'.concat(t.id,'"]'));this.onClick(n,e)}}else this.unselect()}},{key:"updateState",value:function(){if(this.element){var t=this.element.querySelector(".control");this.values.forEach(function(e,n){var o=t.childNodes[n];e.disabled?o.classList.add("disabled"):o.classList.remove("disabled"),e.selected?o.classList.add("selected"):o.classList.remove("selected")})}}},{key:"addValue",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("No"===(t=t&&""!==t.toString().trim()?t.toString():"No")&&(this.key===s.MtmControlEnum.AudioVideo||this.key===s.MtmControlEnum.System))return-1;var o=this.cache[t];return null==o?(o=new a.MtmValue({id:++this.count,name:t,price:e,value:parseInt(t),code:n}),this.values.push(o)):(o.count++,o.price=Math.min(e,o.price)),this.cache[t]=o,o.id}},{key:"sort",value:function(t){var e=new n.MtmPaths;if(this.index=t,this.values.length>0)if(this.sortType===s.MtmSortType.Numeric)this.values.sort(function(t,e){return t.value-e.value});else{this.values.sort(function(t,e){return t.price-e.price});var o=this.values[0].price;o?this.values.forEach(function(t){return t.price=t.price-o}):this.values.sort(function(t,e){return t.name.toLowerCase().localeCompare(e.name.toLowerCase())})}var i=this.values.find(function(t){return"No"===t.name});i&&(this.values.splice(this.values.indexOf(i),1),this.nullable&&this.values.unshift(i)),"1"!==e.showPrices&&this.values.forEach(function(t,e){return t.price=0}),this.setDefaultValue(),this.setDefaultNames()}},{key:"setDefaultValue",value:function(){var t=this;if(this.values.length&&this.defaultId){var e=this.values.find(function(e){return e.id===t.defaultId});e&&(e.selected=!0,this.currentItem=e,this.values.splice(this.values.indexOf(e),1),this.values.unshift(e))}}},{key:"setDefaultNames",value:function(){var t=this;if(this.values.length&&this.defaultNames){var e=this.values.find(function(e){return-1!==t.defaultNames.indexOf(e.name)});e&&(e.selected=!0,this.currentItem=e,this.values.splice(this.values.indexOf(e),1),this.values.unshift(e))}}},{key:"selected",get:function(){this.currentItem;return this.currentItem?this.currentItem:{id:-1,name:"-",price:0}}}])&&o(e.prototype,r),u&&o(e,u),t}();e.MtmControl=u})},{"../data.service":9,"../utils/dom":11,"./constants":2,"./value":8}],4:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(o){if("object"===(void 0===e?"undefined":a(e))&&"object"===a(e.exports)){var i=o(t,n);void 0!==i&&(e.exports=i)}else"function"==typeof define&&define.amd&&define(["require","exports","../data.service","./constants","./control"],o)}(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=t("../data.service"),a=t("./constants"),u=t("./control"),l=function(t){function e(t){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=i(this,r(e).call(this,t))).type=a.MtmControlType.Grid,o.paths=new n.MtmPaths,o}var l,c,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u.MtmControl),l=e,(c=[{key:"getTemplate",value:function(){return'<div class="option option--'.concat(this.key,'">\n\t\t<div class="title">').concat(this.name,"</div>").concat(this.description?'<div class="subtitle">'.concat(this.description,"</div>"):"",'\n\t\t<div class="control control--grid ').concat(this.className,'"></div>\n\t</div>')}},{key:"getChildTemplate",value:function(t){return'<div class="btn btn--system '.concat(t.selected?"selected":""," ").concat(t.active?"active":"",'" data-id="').concat(t.id,'">\n\t\t<img class="icon" src="').concat(this.paths.assets,"img/mtm-configurator/").concat(t.getKey(),'.jpg" title="').concat(t.name,'" />').concat(t.getPrice(),'\n\t\t<button type="button" class="btn btn--info">i</button>\n\t</div>')}}])&&o(l.prototype,c),f&&o(l,f),e}();e.MtmGrid=l})},{"../data.service":9,"./constants":2,"./control":3}],5:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(o){if("object"===(void 0===e?"undefined":a(e))&&"object"===a(e.exports)){var i=o(t,n);void 0!==i&&(e.exports=i)}else"function"==typeof define&&define.amd&&define(["require","exports","./constants","./control"],o)}(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=t("./constants"),a=t("./control"),u=function(t){function e(t){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=i(this,r(e).call(this,t))).type=n.MtmControlType.Group,o}var u,l,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,a.MtmControl),u=e,(l=[{key:"getTemplate",value:function(){return'<div class="option option--'.concat(this.key,'">\n\t\t<div class="title">').concat(this.name,"</div>").concat(this.description?'<div class="subtitle">'.concat(this.description,"</div>"):"",'\n\t\t<div class="control control--group ').concat(4===this.values.length?"btn-group--4":""," ").concat(this.className,'"></div>\n\t</div>')}}])&&o(u.prototype,l),c&&o(u,c),e}();e.MtmGroup=u})},{"./constants":2,"./control":3}],6:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(o){if("object"===(void 0===e?"undefined":a(e))&&"object"===a(e.exports)){var i=o(t,n);void 0!==i&&(e.exports=i)}else"function"==typeof define&&define.amd&&define(["require","exports","./constants","./control"],o)}(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=t("./constants"),a=t("./control"),u=function(t){function e(t){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=i(this,r(e).call(this,t))).type=n.MtmControlType.List,o}var u,l,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,a.MtmControl),u=e,(l=[{key:"getTemplate",value:function(){return'<div class="option option--'.concat(this.key,'">\n\t\t\t<div class="title">').concat(this.name,"</div>").concat(this.description?'<div class="subtitle">'.concat(this.description,"</div>"):"",'\n\t\t\t<div class="control control--list ').concat(this.className,'"></div>\n\t\t</div>')}}])&&o(u.prototype,l),c&&o(u,c),e}();e.MtmList=u})},{"./constants":2,"./control":3}],7:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=function(t){return t&&t.__esModule?t:{default:t}};!function(o){if("object"===(void 0===e?"undefined":a(e))&&"object"===a(e.exports)){var i=o(t,n);void 0!==i&&(e.exports=i)}else"function"==typeof define&&define.amd&&define(["require","exports","../utils/dom","./constants","./control"],o)}(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=u(t("../utils/dom")),a=t("./constants"),l=t("./control"),c=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=i(this,r(e).call(this,t))).type=a.MtmControlType.Select,n.nullable&&n.values.unshift(a.MtmControls.selectNone),n}var u,c,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,l.MtmControl),u=e,(c=[{key:"getTemplate",value:function(){return'<div class="option option--'.concat(this.key,'">\n\t\t<div class="title">').concat(this.name,"</div>").concat(this.description?'<div class="subtitle">'.concat(this.description,"</div>"):"",'\n\t\t<div class="control control--list ').concat(this.className,'">\n\t\t\t<div class="btn btn--select">\n\t\t\t\t<select class="form-control form-control--select"></select>\n\t\t\t\t<span class="label"></span>\n\t\t\t</div>\n\t\t</div>\n\t</div>')}},{key:"getChildTemplate",value:function(t){return'<option class="'.concat(t.selected?"selected":""," ").concat(t.disabled?"disabled":""," ").concat(t.active?"active":"",'" value="').concat(t.id,'" data-id="').concat(t.id,'">').concat(t.name,"</option>")}},{key:"render",value:function(){var t=this,e=this.getFragment(),o=e.querySelector(".form-control--select"),i=this.values.map(function(e){return n.default.fragmentFromHTML(t.getChildTemplate(e))}),r=e.querySelector(".control");i.forEach(function(t){return o.appendChild(t)}),this.element=r,o.addEventListener("change",function(e){return t.onChange(e)});var s=this.values.find(function(t){return t.selected});return s&&(o.value=s.id.toFixed()),this.onUpdate(o),e}},{key:"updateState",value:function(){if(this.element){var t=this.element.querySelector("select");this.values.forEach(function(e,n){var o=t.childNodes[n];e.disabled&&-1!==e.id?o.setAttribute("disabled","disabled"):o.removeAttribute("disabled")})}}},{key:"onUpdate",value:function(t){if(t){var e=parseInt(t.value),n=this.values.find(function(t){return t.id===e});if(this.currentItem=n,n&&this.element)this.element.querySelector(".label").innerHTML=n.name;"function"==typeof this.didChange&&this.didChange(n,this)}}},{key:"onChange",value:function(t){this.onUpdate(t.target)}},{key:"onSelect",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.values.forEach(function(t){return t.selected=!1}),this.currentItem=t,t&&(t.selected=!0,this.element)){this.element.querySelector(".label").innerHTML=t.name;var e=this.element.querySelector("select");this.values.forEach(function(t,n){t.selected=!1;var o=e.childNodes[n];t.selected?o.classList.add("selected"):o.classList.remove("selected")}),e.value=t.id.toString()}}}])&&o(u.prototype,c),f&&o(u,f),e}();e.MtmSelect=c})},{"../utils/dom":11,"./constants":2,"./control":3}],8:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(o){if("object"===(void 0===e?"undefined":i(e))&&"object"===i(e.exports)){var r=o(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports"],o)}(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.price=0,this.count=1,this.order=0,this.value=0,this.selected=!1,this.active=!1,this.disabled=!1,e&&Object.assign(this,e)}var e,n,i;return e=t,(n=[{key:"getPrice",value:function(){var t=this.price.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return this.price>0?'<span class="price">+ € '.concat(t,"</span>"):'<span class="price"></span>'}},{key:"updatePrice",value:function(t){if(t){var e=t.querySelector('[data-id="'.concat(this.id,'"] .price'));if(e){var n=this.price.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});e.innerHTML=this.price>0?"+ € ".concat(n):""}}}},{key:"getKey",value:function(){return this.name.replace(/ /g,"").toLowerCase()}}])&&o(e.prototype,n),i&&o(e,i),t}();e.MtmValue=n})},{}],9:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(o){if("object"===(void 0===e?"undefined":r(e))&&"object"===r(e.exports)){var i=o(t,n);void 0!==i&&(e.exports=i)}else"function"==typeof define&&define.amd&&define(["require","exports","whatwg-fetch","./controls/constants","./controls/control","./controls/grid","./controls/group","./controls/list","./controls/select"],o)}(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),t("whatwg-fetch");var n=t("./controls/constants"),r=t("./controls/control"),s=t("./controls/grid"),a=t("./controls/group"),u=t("./controls/list"),l=t("./controls/select"),c=function t(){i(this,t),this.assets="",this.kits="data/kits.json",this.parts="data/parts.json",this.localizations="data/localizations.json",this.configurator="http://websolute.came.com/came_configurator",this.viewKitUrl="http://websolute.came.com/came_configurator/view_kit/",this.showPrices="1",window.hasOwnProperty("paths")&&(Object.assign(this,window.paths),-1!==this.kits.indexOf(":/")&&(this.configurator=this.kits.split("/came_configurator")[0]+"/came_configurator"))};e.MtmPaths=c;e.MtmPart=function t(){i(this,t)};e.MtmKit=function t(){i(this,t)};e.MtmResult=function t(){i(this,t)};var f=function(){function t(){i(this,t)}var e,f,d;return e=t,d=[{key:"fetch",value:function(e,o){return Object.keys(n.MtmControlEnum).forEach(function(e){var o=e,i=n.MtmControlEnum[o];t.map[i]=o}),t.fetchJson(e,o)}},{key:"fetchJson",value:function(e,o){var i=this,r=new c;return Promise.all([r.kits,r.parts,r.localizations].map(function(e,o){return fetch(e).then(function(t){return t.json()}).then(function(e){return 0===o?e=e.map(function(t){return-1!==t.code.indexOf("DIGI2D")?t.digi="DIGI2D":-1!==t.code.indexOf("DIGI1")?t.digi="DIGI1":-1!==t.code.indexOf("DIGI")?t.digi="DIGI":t.digi=null,t.digi?(t.buttons=48,t.buttonType=t.digi):isNaN(parseInt(t.buttons))?(t.buttons=null,t.buttonType=null,console.log("error",t)):(t.buttons=parseInt(t.buttons),t.buttonType=(t.buttons?t.buttons:"")+(t.divided?t.divided:"")),t.electronicsModule1=t.electronicsModule1?parseInt(t.electronicsModule1):null,t.electronicsModule2=t.electronicsModule2?parseInt(t.electronicsModule2):null,t.electronicsModule3=t.electronicsModule3?parseInt(t.electronicsModule3):null,t.electronicsModule4=t.electronicsModule4?parseInt(t.electronicsModule4):null,t.frontPiece1=t.frontPiece1?parseInt(t.frontPiece1):null,t.frontPiece2=t.frontPiece2?parseInt(t.frontPiece2):null,t.frontPiece3=t.frontPiece3?parseInt(t.frontPiece3):null,t.frontPiece4=t.frontPiece4?parseInt(t.frontPiece4):null,t.frame=parseInt(t.frame),t.mounting=parseInt(t.mounting),t.moduleSize=parseInt(t.moduleSize),t.flushRainshield=t.flushRainshield?parseInt(t.flushRainshield):null,t}).filter(function(t){return t.buttons}):1===o?e=e.map(function(t){return t.id=parseInt(t.nid),t.price=parseFloat(t.price),delete t.nid,t}):2===o&&(t.controls=n.MtmControls.withLocale(e),t.controls.filter(function(t){return!t.disabled}).forEach(function(e){t.controlsMap[e.key]=e})),e})})).then(function(o){var r=o[1],s=o[2],a=i.partsPool;r.forEach(function(t){a[t.id]=t});var u=i.partsKeys,l={},c=o[0].map(function(t){var e=0;return u.forEach(function(n){if(t.hasOwnProperty(n)){var o=a[t[n]];if(o){e+=o.price;var i=n.replace(/\d/,"");o.type=i;var r=l[i]=l[i]||[];-1===r.indexOf(o.code)&&r.push(o.code)}}}),t.price=e,t});Object.keys(l).forEach(function(t){l[t].sort()}),c.sort(function(t,e){return t.price-e.price});var f=t.controls.filter(function(t){return!t.disabled}).map(function(t){return t.key}),d=f.map(function(e){return t.newControlByKey(e)}),p={};d.forEach(function(t){return p[t.key]=t});var h=c.map(function(t){return f.filter(function(t){return p[t]}).map(function(e){t.finish="Standard"===t.finish?s.buttonAluminumName:t.finish;var o=p[e],i=null;return e===n.MtmControlEnum.Mount&&(i=t.mounting),o.addValue(t[e],t.price,i)})});d.forEach(function(t,e){return t.sort(e)}),t.kits=c,t.parts=r,t.partsPool=a,t.cols=d,t.rows=h,"function"==typeof e&&e(d,h)})}},{key:"fetchCsv",value:function(e,n){fetch("data/data.csv").then(function(t){return t.text()}).then(function(n){var o=n.split("\n"),i=t.parseCsvArray(o.shift()||"").map(function(e){return t.renameColumn(e.trim())}).map(function(e){return t.newControlByKey(e)}),r=o.map(function(e){return t.parseCsvArray(e).map(function(t){return t.trim()})}).map(function(t){return t.map(function(t,e){return i[e].addValue(t,0)}).filter(function(t){return t})});i.forEach(function(t,e){return t.sort(e)}),t.cols=i,t.rows=r,"function"==typeof e&&e(i,r)}).catch(function(t){"function"==typeof n&&n(t)})}},{key:"renameColumn",value:function(t){return""===t&&(t="description"),t}},{key:"newControlByKey",value:function(e){var o,i=t.controlsMap[e]||t.controlsMap.Default;switch(i.type){case n.MtmControlType.Select:o=new l.MtmSelect(i);break;case n.MtmControlType.Group:o=new a.MtmGroup(i);break;case n.MtmControlType.List:o=new u.MtmList(i);break;case n.MtmControlType.Grid:o=new s.MtmGrid(i);break;default:o=new r.MtmControl(i)}return o}},{key:"optionWithKey",value:function(e){return t.cols.find(function(t){return t.key===e})}},{key:"parseCsvArray",value:function(t){if(!/^\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*(?:,\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*)*$/.test(t))return[];var e=[];return t.replace(/(?!\s*$)\s*(?:'([^'\\]*(?:\\[\S\s][^'\\]*)*)'|"([^"\\]*(?:\\[\S\s][^"\\]*)*)"|([^,'"\s\\]*(?:\s+[^,'"\s\\]+)*))\s*(?:,|$)/g,function(t,n,o,i){return void 0!==n?e.push(n.replace(/\\'/g,"'")):void 0!==o?e.push(o.replace(/\\"/g,'"')):void 0!==i&&e.push(i),""}),/,\s*$/.test(t)&&e.push(""),e}}],(f=null)&&o(e.prototype,f),d&&o(e,d),t}();f.kits=[],f.parts=[],f.partsKeys=["electronicsModule1","electronicsModule2","electronicsModule3","electronicsModule4","frontPiece1","frontPiece2","frontPiece3","frontPiece4","frame","mounting","flushRainshield"],f.partsPool={},f.cols=[],f.rows=[],f.map={},f.controlsMap={},e.default=f})},{"./controls/constants":2,"./controls/control":3,"./controls/grid":4,"./controls/group":5,"./controls/list":6,"./controls/select":7,"whatwg-fetch":1}],10:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},s=function(t){return t&&t.__esModule?t:{default:t}};!function(o){if("object"===(void 0===e?"undefined":i(e))&&"object"===i(e.exports)){var r=o(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports","./controls/constants","./data.service","./utils/dom","./utils/rect"],o)}(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=t("./controls/constants"),i=r(t("./data.service")),a=s(t("./utils/dom")),u=s(t("./utils/rect")),l=function(){function t(e){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cols=[],this.rows=[],this.filteredRows=[],this.row=null,this.currentKey=n.MtmControlEnum.Buttons,this.playing=!1,this.element=document.querySelector(e),"1"!==(new i.MtmPaths).showPrices&&this.element.classList.add("noprice");var r=[].slice.call(this.element.querySelectorAll("[sticky]"));this.stickys=r,this.stickyContents=r.map(function(t){return t.querySelector("[sticky-content]")});var s=this.element.querySelector(".clear-cta");s&&s.addEventListener("click",function(){o.onClear()}),this.addRecapScrollFixed(),i.default.fetch(function(t,e){o.cols=t,o.rows=e;var r=[i.default.newControlByKey(n.MtmControlEnum.KnownTecnology),i.default.newControlByKey(n.MtmControlEnum.ConstrainedDimension),i.default.optionWithKey(n.MtmControlEnum.AudioVideo),i.default.newControlByKey(n.MtmControlEnum.ApartmentNumber),i.default.newControlByKey(n.MtmControlEnum.CallButtons),i.default.optionWithKey(n.MtmControlEnum.Keypad),i.default.optionWithKey(n.MtmControlEnum.Proximity),i.default.optionWithKey(n.MtmControlEnum.DigitalDisplay),i.default.optionWithKey(n.MtmControlEnum.InfoModule),i.default.optionWithKey(n.MtmControlEnum.HearingModule),i.default.optionWithKey(n.MtmControlEnum.Finish),i.default.optionWithKey(n.MtmControlEnum.Mount),i.default.optionWithKey(n.MtmControlEnum.System),i.default.optionWithKey(n.MtmControlEnum.ModuleSize)],s=new i.MtmPaths;i.default.optionWithKey(n.MtmControlEnum.Mount).resolvePicture=function(t){var e=t.name.toLowerCase().replace(/[\s|\W]+/g,"-");return"".concat(s.assets,"img/mtm-configurator/").concat(e,".jpg")},r.forEach(function(t){return t.didChange=function(t,e){switch(e.key){case n.MtmControlEnum.KnownTecnology:if(1===t.id)i.default.optionWithKey(n.MtmControlEnum.System).onSelect(null);o.doReorder(),o.onSearch(o.didSelectCallButton());break;case n.MtmControlEnum.ConstrainedDimension:if(1===t.id)i.default.optionWithKey(n.MtmControlEnum.ModuleSize).onSelect(null);o.doReorder(),o.onSearch(o.didSelectCallButton());break;case n.MtmControlEnum.CallButtons:o.onSearch(o.didSelectCallButton());break;default:o.onSearch(e.key)}}}),o.options=r,o.render(),o.onSearch(o.didSelectCallButton()),o.element.querySelector(".media>.picture").addEventListener("click",function(){o.toggleResults()})},function(t){console.log("error",t)})}var e,r,s;return e=t,(r=[{key:"onClear",value:function(){this.options.forEach(function(t){t.onSelect(null),t.setDefaultValue(),t.setDefaultNames(),t.updateState()}),this.doReorder(),this.onSearch(this.didSelectCallButton())}},{key:"getRows",value:function(t,e){var o=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.currentKey=t;var s=this.options.map(function(t){var e=o.cols.indexOf(t);return-1!==e?t:{index:e}}).filter(function(t){return-1!==t.index}).map(function(t){return t}),a=s.filter(function(t){return t.selected&&-1!==t.selected.id}),u=s.filter(function(t){return!(t.selected&&-1!==t.selected.id)});if(!r){var l=i.default.optionWithKey(n.MtmControlEnum.Divided);l.selected&&-1!==l.selected.id?a.unshift(l):(l.values.forEach(function(t){t.disabled=!1}),l.updateState());var c=i.default.optionWithKey(n.MtmControlEnum.Digi);c.selected&&-1!==c.selected.id?a.unshift(c):(c.values.forEach(function(t){t.disabled=!1}),c.updateState())}var f=this.options.find(function(t){return t.key===n.MtmControlEnum.ApartmentNumber});f.selected&&-1!==f.selected.id&&a.unshift(f);var d=i.default.optionWithKey(n.MtmControlEnum.Buttons),p=this.rows.filter(function(o){return a.reduce(function(i,r){if(r.key===n.MtmControlEnum.ApartmentNumber){var s=o[d.index],a=d.values.find(function(t){return t.id===s});return i&&f.selected.value<=a.value}return r.key===t&&e?-1===e.id||i&&o[r.index]===e.id:i&&o[r.index]===r.selected.id},!0)});return r||(u.forEach(function(t){t.values.forEach(function(t){return t.disabled=!0})}),p.forEach(function(t,e){u.forEach(function(e){e.values.forEach(function(n){n.id===t[e.index]&&(n.disabled=!1)}),e.updateState()})})),p}},{key:"didSelectApartmentNumber",value:function(){this.options.find(function(t){return t.key===n.MtmControlEnum.ApartmentNumber});return n.MtmControlEnum.ApartmentNumber}},{key:"setApartmentNumberState",value:function(t){var e=i.default.optionWithKey(n.MtmControlEnum.Buttons),o=this.options.find(function(t){return t.key===n.MtmControlEnum.ApartmentNumber});o.values.forEach(function(t){return t.disabled=!0}),t.forEach(function(t){var n=t[e.index],i=e.values.find(function(t){return t.id===n});o.values.forEach(function(t){t.disabled=t.disabled&&!(i.value>=t.value)}),o.updateState()})}},{key:"didSelectCallButton",value:function(){var t,e=this.options.find(function(t){return t.key===n.MtmControlEnum.CallButtons}),o=i.default.optionWithKey(n.MtmControlEnum.Divided),r=i.default.optionWithKey(n.MtmControlEnum.Digi);if(-1!==e.selected.id)switch(e.selected.id){case 1:o.onSelect(o.values.find(function(t){return 1===t.id})),r.onSelect(r.values.find(function(t){return 1===t.id})),t=n.MtmControlEnum.Divided;break;case 2:o.onSelect(o.values.find(function(t){return 2===t.id})),r.onSelect(r.values.find(function(t){return 1===t.id})),t=n.MtmControlEnum.Divided;break;case 3:o.onSelect(o.values.find(function(t){return 1===t.id})),r.onSelect(r.values.find(function(t){return"DIGI"===t.name})),t=n.MtmControlEnum.Keypad;break;case 4:o.onSelect(o.values.find(function(t){return 1===t.id})),r.onSelect(r.values.find(function(t){return"DIGI1"===t.name})),t=n.MtmControlEnum.Digi;break;case 5:o.onSelect(o.values.find(function(t){return 2===t.id})),r.onSelect(r.values.find(function(t){return"DIGI2D"===t.name})),t=n.MtmControlEnum.Digi}else o.currentItem=null,r.currentItem=null;return t}},{key:"setCallButtonsState",value:function(t){t=this.getRows(this.currentKey,null,!0);var e=i.default.optionWithKey(n.MtmControlEnum.Divided),o=i.default.optionWithKey(n.MtmControlEnum.Digi),r=this.options.find(function(t){return t.key===n.MtmControlEnum.CallButtons});r.values.forEach(function(t){return t.disabled=!0}),t.forEach(function(t){var n=t[e.index],i=t[o.index];r.values.forEach(function(t){switch(t.id){case 1:t.disabled=t.disabled&&!(1===n&&1===i),"pulsante singolo";break;case 2:t.disabled=t.disabled&&!(2===n&&1===i),"pulsante doppio";break;case 3:t.disabled=t.disabled&&!(1===n&&i===o.values.find(function(t){return"DIGI"===t.name}).id),"digital keypad";break;case 4:t.disabled=t.disabled&&!(1===n&&i===o.values.find(function(t){return"DIGI1"===t.name}).id),"digital keypad + DIGI 1";break;case 5:t.disabled=t.disabled&&!(2===n&&i===o.values.find(function(t){return"DIGI2D"===t.name}).id),"digital keypad + DIGI 2"}}),r.updateState()})}},{key:"doReorder",value:function(){var t=[],e=this.options.find(function(t){return t.key===n.MtmControlEnum.KnownTecnology}),o=this.options.find(function(t){return t.key===n.MtmControlEnum.System}),i=this.options.find(function(t){return t.key===n.MtmControlEnum.ConstrainedDimension}),r=this.options.find(function(t){return t.key===n.MtmControlEnum.ModuleSize});t.push(e.element),2===e.selected.id&&t.push(o.element),t.push(i.element),2===i.selected.id&&t.push(r.element);var s=this.options.find(function(t){return t.key===n.MtmControlEnum.AudioVideo}),a=this.options.find(function(t){return t.key===n.MtmControlEnum.ApartmentNumber}),u=this.options.find(function(t){return t.key===n.MtmControlEnum.Buttons}),l=this.options.find(function(t){return t.key===n.MtmControlEnum.CallButtons}),c=this.options.find(function(t){return t.key===n.MtmControlEnum.Keypad}),f=this.options.find(function(t){return t.key===n.MtmControlEnum.Proximity}),d=this.options.find(function(t){return t.key===n.MtmControlEnum.DigitalDisplay}),p=this.options.find(function(t){return t.key===n.MtmControlEnum.InfoModule}),h=this.options.find(function(t){return t.key===n.MtmControlEnum.HearingModule}),m=this.options.find(function(t){return t.key===n.MtmControlEnum.Finish}),y=this.options.find(function(t){return t.key===n.MtmControlEnum.Mount});t.push(s.element),a&&a.element&&t.push(a.element),u&&u.element&&t.push(u.element),t.push(l.element),t.push(c.element),t.push(f.element),t.push(d.element),t.push(p.element),t.push(h.element),t.push(m.element),t.push(y.element),1===e.selected.id&&t.push(o.element),1===i.selected.id&&t.push(r.element),this.options.map(function(t){return t.element}).forEach(function(t){t.parentNode&&t.parentNode.removeChild(t)});var v=this.element.querySelector(".options-outlet");t.forEach(function(t){return v.appendChild(t)})}},{key:"onSearch",value:function(t){var e=this.getRows(t);if(this.setApartmentNumberState(e),this.setCallButtonsState(e),e.length>0){var n=e[0];this.setRow(n)}a.default.log("results",e.length),this.filteredRows=e}},{key:"toggleResults",value:function(){var t=this.filteredRows;if(t.length>1){var e=(t.indexOf(this.row)+1)%t.length;this.setRow(t[e])}}},{key:"calcOptions__",value:function(t){var e=this,o=i.default.optionWithKey(n.MtmControlEnum.Price),r=[n.MtmControlEnum.Buttons,n.MtmControlEnum.AudioVideo,n.MtmControlEnum.Keypad,n.MtmControlEnum.Proximity,n.MtmControlEnum.DigitalDisplay,n.MtmControlEnum.InfoModule,n.MtmControlEnum.HearingModule,n.MtmControlEnum.Finish,n.MtmControlEnum.Mounting,n.MtmControlEnum.System,n.MtmControlEnum.ModuleSize].map(function(t){return i.default.optionWithKey(t)}),s=i.default.optionWithKey(this.currentKey);r.indexOf(s)>0&&(r.splice(r.indexOf(s),1),r.unshift(s));var a=new i.MtmPaths;r.forEach(function(n){var s=t.slice(),u=Number.POSITIVE_INFINITY,l=0;n.values.forEach(function(t){s[n.index]=t.id;var c=e.rows.filter(function(t){return r.reduce(function(o,i,r){return i===n?o&&t[i.index]===s[i.index]:i.lazy&&i.key!==e.currentKey?o:o&&t[i.index]===s[i.index]},!0)});if(r.filter(function(t){return t.lazy}).forEach(function(t){var e=c.filter(function(e){return e[t.index]===s[t.index]});c=e}),"1"==a.showPrices){if(c.length>0){var f=o.values.find(function(t){return t.id===c[0][o.index]}).value;t.price=f,t.disabled=!1,l++}else t.price=0,t.disabled=!0;u=Math.min(t.price,u)}else{if(t.price=0,c.length>0){if(-1!==i.default.partsKeys.indexOf(n.key)){var d=i.default.partsPool[t.value];d&&(t.price=d.price)}t.disabled=!1,l++}else t.disabled=!0;t.updatePrice(n.element)}}),"1"==a.showPrices&&n.values.forEach(function(t){t.price;l>1?t.price-=u:t.price=0,t.updatePrice(n.element)}),n.updateState()})}},{key:"calcOptions",value:function(t){}},{key:"setRow",value:function(t){this.row=t;var e={};this.cols.forEach(function(n,o){if(t[o]){var i=n.values.find(function(e){return e.id===t[o]});e[n.key]=i?i.name:"-"}else e[n.key]=null});var o=parseFloat(e.price),r=new i.MtmPaths;if("1"==r.showPrices){var s=o.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});this.element.querySelectorAll(".result-price").forEach(function(t){return t.innerHTML="€ ".concat(s)})}else this.element.querySelectorAll(".result-price").forEach(function(t){return t.innerHTML=""});this.element.querySelector(".result-code").innerHTML=e.code;var u=[n.MtmControlEnum.Module1,n.MtmControlEnum.Module2,n.MtmControlEnum.Module3,n.MtmControlEnum.Module4],l=[];u.forEach(function(t){var n=e[t];"-"!==n&&l.push(i.default.parts.find(function(t){return t.id===parseInt(n)}).shortDescription)}),this.element.querySelector(".result-description").innerHTML=l.join(", "),this.element.querySelector(".result-finish").innerHTML=e.finish,this.element.querySelector(".result-system").innerHTML=e.system,this.element.querySelector(".result-mount").innerHTML=e.mount;var c=e.code.replace(/\//g,"|");this.element.querySelector(".result-cta").setAttribute("href","".concat(r.viewKitUrl).concat(c));var f=this.element.querySelector(".media>.picture");f.classList.add("loading");var d=new Image;d.onload=function(){f.classList.remove("loading"),f.querySelectorAll("img").forEach(function(t){return t.parentNode.removeChild(t)}),f.appendChild(d)},d.src="".concat(r.configurator,"/build_kit_image/").concat(c),this.calcOptions(t),a.default.log("setRow",e)}},{key:"render",value:function(){var t=this,e=this.element.querySelector(".options-outlet");this.options.map(function(t){return t.render()}).forEach(function(t){return e.appendChild(t)}),this.options.forEach(function(e){return e.element=t.element.querySelector(".option--".concat(e.key))})}},{key:"addMediaScrollListener",value:function(){var t=this.element.querySelector(".sidebar"),e=this.element.querySelector(".media"),n=function(){t.getBoundingClientRect().top<60?e.classList.add("fixed"):e.classList.remove("fixed")};n(),window.addEventListener("scroll",n,!1)}},{key:"addRecapScrollListener",value:function(){var t=this.element.querySelector(".section--recap--fixed > .inner"),e=a.default.scrollTop(),n=function(){var n=a.default.scrollTop();n>e?t.classList.add("fixed"):t.classList.remove("fixed"),e=n<=0?0:n};n(),window.addEventListener("scroll",n,!1)}},{key:"addRecapScrollFixed",value:function(){this.element.querySelector(".section--recap--fixed > .inner").classList.add("fixed")}},{key:"animate",value:function(){var t=this;this.stickys.forEach(function(e,n){var o=t.stickyContents[n],i=parseInt(e.getAttribute("sticky"))||0,r=u.default.fromNode(e),s=e.offsetHeight-o.offsetHeight;window.innerWidth>=768?(i=Math.max(0,Math.min(s,i-r.top)),o.setAttribute("style","transform: translateY(".concat(i,"px);"))):o.setAttribute("style","transform: none;")})}},{key:"loop",value:function(){var t=this;this.animate(),this.playing&&window.requestAnimationFrame(function(){t.loop()})}},{key:"play",value:function(){this.playing=!0,this.loop()}},{key:"pause",value:function(){this.playing=!1}}])&&o(e.prototype,r),s&&o(e,s),t}();e.default=l;new l(".configurator")})},{"./controls/constants":2,"./data.service":9,"./utils/dom":11,"./utils/rect":12}],11:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(o){if("object"===(void 0===e?"undefined":i(e))&&"object"===i(e.exports)){var r=o(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports"],o)}(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o=["%c%s","background: #1976d2; color: #fff; border-radius: 3px; padding: 4px 8px; margin-bottom: 4px;"].concat(e);console.log.apply(this,o)}},{key:"fragmentFirstElement",value:function(t){return Array.prototype.slice.call(t.children).find(function(t){return t.nodeType===Node.ELEMENT_NODE})}},{key:"fragmentFromHTML",value:function(t){return document.createRange().createContextualFragment(t)}},{key:"scrollTop",value:function(){var t=window?window.pageXOffset:0,e=document&&document.documentElement?document.documentElement.scrollTop:0;return t||e}}],(n=null)&&o(e.prototype,n),i&&o(e,i),t}();e.default=n})},{}],12:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(o){if("object"===(void 0===e?"undefined":i(e))&&"object"===i(e.exports)){var r=o(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports"],o)}(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=0,this.height=0,this.top=0,this.left=0,this.right=0,this.bottom=0,this.set(e)}var e,n,i;return e=t,i=[{key:"contains",value:function(t,e,n){return t.top<=n&&n<=t.bottom&&t.left<=e&&e<=t.right}},{key:"intersectRect",value:function(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}},{key:"fromNode",value:function(e){if(!e.getClientRects().length)return new t;var n=e.getBoundingClientRect();return new t({top:n.top,left:n.left,width:n.width,height:n.height})}}],(n=[{key:"set",value:function(t){t&&(Object.assign(this,t),this.right=this.left+this.width,this.bottom=this.top+this.height),this.center={top:this.top+this.height/2,left:this.left+this.width/2},this.center.x=this.center.left,this.center.y=this.center.top}},{key:"contains",value:function(e,n){return t.contains(this,e,n)}},{key:"intersect",value:function(e){return t.intersectRect(this,e)}},{key:"intersection",value:function(t){var e={x:(this.center.x-t.center.x)/(t.width/2),y:(this.center.y-t.center.y)/(t.height/2)};if(this.intersect(t)){var n=this.left>t.left?0:Math.abs(t.left-this.left),o=this.top>t.top?0:Math.abs(t.top-this.top),i=n?1-n/this.width:(t.left+t.width-this.left)/this.width,r=o?1-o/this.height:(t.top+t.height-this.top)/this.height;return{x:i=Math.min(1,i),y:r=Math.min(1,r),center:e}}return{x:0,y:0,center:e}}}])&&o(e.prototype,n),i&&o(e,i),t}();e.default=n})},{}]},{},[10]);
//# sourceMappingURL=main.min.js.map